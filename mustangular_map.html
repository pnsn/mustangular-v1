<!DOCTYPE html>
<head>
   <meta charset="UTF-8">
   <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
   <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"></script>
   <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
   <!-- <link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.1/dist/leaflet.css" /> -->
   <link rel="stylesheet" type="text/css" href="mustangular.css"></link>
   <script src="js/angular-leaflet-directive.js"></script>
   <script src="js/mustangular.js"></script>
   <script src="js/rainbowvis.js"></script>
   <!-- <link rel="stylesheet" type="text/css" href="mustangular.css"></link> -->
</head>
<body ng-app="myApp2" ng-controller="SimpleMapController">
   <div ng-model="max">{{max}}</div>
  <leaflet id="map" width="600px" height="800px" markers="markers"> <!--full screen map!-->
  </leaflet>
   <div id="controls">
     	<p>Max binning value: <input type="number" ng-model="binning.max" ng-change="updateBinningValues()" min={{binning.min}}> Values above {{binning.max}} will be not be binned (displayed in purple)</p>
     	<p>Min binning value: <input type="number" ng-model="binning.min" ng-change="updateBinningValues()" max={{binning.max}}> Values below {{binning.min}} will be not be binned (displayed in purple)</p>
      <p>Bin size: <input type="number" ng-model="binning.count" ng-change="updateBinningValues()" min="1"> Values divided into {{binning.count}} bins</p>
      <p>Maximum metric value: {{edges.max}}</p>
      <p>Mininum metric value: {{edges.min}}</p>
      <p>There are {{edges.count}} stations on the map.</p>
 <!--metrics: 5 of them? -->
 <!--date selection -->
   </div>
   <div id="key">
      <!-- <h4> Key </h4> -->
      <table>
         <th> Key </th>
         <tr ng-repeat="icon in icons">
            <td><div class="icon-key" style='background-color:#{{icon.color}}'></div></td><td>{{icon.min | number:1}}  - {{icon.max | number:1}}</td>
         </tr>
      </table>
   </div>
</body>
</html>

<!--TODO: make up a marker that isn't huge,
color code the markers: colored by latency with a legend,
make code more angular and less jquery,
initial zoom level needs to be fitted to markers -->

<!--TODO: Next week: 
Legend, better controls, fix the binning!!!, add date select

 -->